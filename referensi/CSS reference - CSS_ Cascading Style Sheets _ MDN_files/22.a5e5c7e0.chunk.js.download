(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[22],{68:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return F}));var r=n(26),c=n(27),i=n(28),a=n(30),s=n(5),u=n(8),o=n.n(u),l=n(12),j=n(3),h=n(0),f=n(1),b=n.n(f),d=n(2),O=n(4),m=n(105),p=n(93),v=n.n(p),x=n(14),g=n(15),w=n(94),y=function(){function e(t){Object(r.a)(this,e),this.docs=void 0,this.docs=t}return Object(c.a)(e,[{key:"search",value:function(e,t){var n=t.limit,r=void 0===n?10:n,c=this.docs;if(e.length<=3){var i,a=e.toLowerCase(),s=[],u=Object(g.a)(this.docs);try{for(u.s();!(i=u.n()).done;){var o=i.value;if(o.url.toLowerCase().includes(a)&&(s.push(o),s.length===r))break}}catch(l){u.e(l)}finally{u.f()}s.length>=r&&(c=s)}return new w.a(c,{limit:r,selector:function(e){return e.url}}).find(e)}}]),e}(),E=n(32),k=n(9),S=n(23);function z(e){return e.startsWith("/")&&!/\s/.test(e)}function N(e){var t=e.title,n=e.q.trim().toLowerCase().split(/[ ,]+/),r=n.map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})),c="\\b(".concat(r.join("|"),")"),i=t.split(new RegExp(c,"gi"));return Object(h.jsx)("b",{children:i.map((function(e,t){var r="".concat(e,":").concat(t);return n.includes(e.toLowerCase())?Object(h.jsx)("mark",{children:e},r):Object(h.jsx)("span",{children:e},r)}))})}function C(e){var t=e.uri,n=e.positions;if(n&&n.size){var r=t.split("");return Object(h.jsx)("small",{children:r.map((function(e,t){return n.has(t)?Object(h.jsx)("mark",{children:e},t):Object(h.jsx)("span",{children:e},t)}))})}var c=t.split("/").slice(1).filter((function(e){return"docs"!==e}));return Object(h.jsx)("small",{children:c.join(" / ")})}function I(e){var t=e.inputValue,n=e.onChangeInputValue,r=e.isFocused,c=e.onChangeIsFocused,i=e.onResultPicked,a=e.defaultSelection,u=Object(d.g)(),b=Object(k.a)(),p=function(){var e=Object(f.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(f.useState)(null),i=Object(j.a)(c,2),a=i[0],s=i[1],u=Object(d.h)().locale,h="/".concat(u||"en-US","/search-index.json"),b=Object(x.a)(n?h:null,function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=9;break}return e.t0=Error,e.next=7,n.text();case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:return e.next=11,n.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{revalidateOnFocus:!1}),O=b.error,m=b.data;return Object(f.useEffect)((function(){if(m&&!a){var e=v.a.create({tokenize:"forward"});m.forEach((function(t,n){var r=t.title;e.add(n,r)}));var t=new y(m);s({flex:e,fuzzy:t,items:m})}}),[a,n,m]),Object(f.useMemo)((function(){return[a,O||null,function(){return r(!0)}]}),[a,O,r])}(),g=Object(j.a)(p,3),w=g[0],I=g[1],M=g[2],F=Object(f.useRef)(null),R=Object(f.useRef)(null),q=Object(f.useRef)(!1),L=function(e,t){var n=Object(f.useState)(!1),r=Object(j.a)(n,2),c=r[0],i=r[1],a=Object(f.useRef)(e);return Object(f.useEffect)((function(){if(a.current!==e){a.current=e,i(!1);var n=setTimeout((function(){i(!0)}),t);return function(){clearTimeout(n)}}}),[e,t]),c}(t,500);Object(f.useEffect)((function(){F.current&&!q.current&&(r&&(F.current.selectionStart=a[0],F.current.selectionEnd=a[1]),q.current=!0)}),[r,a]);var P=Object(f.useMemo)((function(){if(!w||!t||I)return[];var e=window.innerHeight<850?5:10;return z(t)?"/"===t?[]:w.fuzzy.search(t.slice(1),{limit:e}).map((function(e){return{url:e.item.url,title:e.item.title,positions:e.positions}})):w.flex.search(t,{limit:e,suggest:!0}).map((function(e){return(w.items||[])[e]}))}),[t,w,I]),T="/".concat(b,"/search"),D=Object(f.useMemo)((function(){var e=new URLSearchParams;return e.set("q",t.trim()),"".concat(T,"?").concat(e.toString())}),[T,t]),U=Object(f.useMemo)((function(){return{url:D,title:"",positions:new Set}}),[D]),V=Object(m.a)({items:0===P.length?[U]:P,inputValue:t,defaultIsOpen:r,onSelectedItemChange:function(e){var t,r=e.selectedItem;r&&(u(r.url),n(""),W(),G(),null===(t=F.current)||void 0===t||t.blur(),i&&i(),window.scroll({top:0,left:0,behavior:"smooth"}))}}),H=V.getInputProps,J=V.getItemProps,$=V.getMenuProps,A=V.getComboboxProps,B=V.highlightedIndex,K=V.isOpen,W=V.reset,G=V.toggleMenu;Object(S.b)(F),Object(f.useEffect)((function(){r&&M()}),[M,r]),Object(f.useEffect)((function(){var e=P[B];if(e&&Object(E.c)()){var t=setTimeout((function(){Object(E.b)("".concat(e.url,"/index.json"))}),500);return function(){clearTimeout(t)}}}),[B,P]);var Q=K&&t.trim()?I?Object(h.jsx)("div",{className:"searchindex-error",children:"Error initializing search index"}):w?Object(h.jsxs)(h.Fragment,{children:[0===P.length&&"/"!==t?Object(h.jsxs)("div",Object(s.a)(Object(s.a)({},J({className:"nothing-found result-item "+(0===B?"highlight":""),item:U,index:0})),{},{children:["No document titles found.",Object(h.jsx)("br",{}),Object(h.jsxs)(O.b,{to:D,children:["Site search for ",Object(h.jsx)("code",{children:t})]})]})):P.map((function(e,n){return Object(h.jsxs)("div",Object(s.a)(Object(s.a)({},J({key:e.url,className:"result-item "+(n===B?"highlight":""),item:e,index:n})),{},{children:[Object(h.jsx)(N,{title:e.title,q:t}),Object(h.jsx)("br",{}),Object(h.jsx)(C,{uri:e.url,positions:e.positions})]}))})),z(t)&&Object(h.jsx)("div",{className:"fuzzy-engaged",children:"Fuzzy searching by URI"})]}):L?Object(h.jsx)("div",{className:"indexing-warning",children:Object(h.jsx)("em",{children:"Initializing index"})}):null:null;return Object(h.jsxs)("form",Object(s.a)(Object(s.a)({action:T},A({ref:R,className:"search-form search-widget",id:"nav-main-search",role:"search",onSubmit:function(e){e.preventDefault()}})),{},{children:[Object(h.jsx)("label",{htmlFor:"main-q",className:"visually-hidden",children:"Search MDN"}),Object(h.jsx)("input",Object(s.a)({},H({type:"search",className:K?"has-search-results search-input-field":"search-input-field",id:"main-q",name:"q",placeholder:Object(S.a)(r),onMouseOver:M,onFocus:function(){c(!0)},onBlur:function(){return c(!1)},onKeyDown:function(e){"Escape"===e.key&&F.current?G():"Enter"===e.key&&t.trim()&&-1===B&&(F.current.blur(),R.current.submit())},onChange:function(e){e.target instanceof HTMLInputElement&&n(e.target.value)},ref:function(e){F.current=e}}))),Object(h.jsx)("input",{type:"submit",className:"ghost search-button",value:"","aria-label":"Search"}),Object(h.jsx)("div",Object(s.a)(Object(s.a)({},$()),{},{children:Q&&Object(h.jsx)("div",{className:"search-results",children:Q})}))]}))}var M=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(r.a)(this,n);for(var c=arguments.length,i=new Array(c),a=0;a<c;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e}return Object(c.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(h.jsx)("div",{children:"Error while rendering search. Check console for details."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return console.error("There was an error while trying to render search",e),{hasError:!0}}}]),n}(b.a.Component);function F(e){return Object(h.jsx)(M,{children:Object(h.jsx)(I,Object(s.a)({},e))})}}}]);
//# sourceMappingURL=22.a5e5c7e0.chunk.js.map